{"ast":null,"code":"import _slicedToArray from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'./products.module.css';import{useState,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{getProductsPerPage,productsSearch}from\"../../actions/products\";import ProductCard from\"../../components/product-card/ProductCard\";import Pages from\"../../components/pages/Pages\";import Categories from\"../../components/categories/Categories\";import Loading from\"../../components/loading/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Products=function Products(_ref){var addProductToCart=_ref.addProductToCart;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),totalPages=_useState6[0],setTotalPages=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var location=useLocation();var dispatch=useDispatch();var navigate=useNavigate();useEffect(function(){setLoading(true);var query=new URLSearchParams(location.search);var page=query.get('page')||1;setPage(Number(page));if(query.get('search')){var search=query.get('search');dispatch(productsSearch(search,page,onSuccess));}else if(query.get('category')){var category=query.get('category');if(category==='All'){setPage(Number(page));dispatch(getProductsPerPage(page,null,onSuccess));}else{dispatch(getProductsPerPage(page,category,onSuccess));}}else{setPage(Number(page));dispatch(getProductsPerPage(page,null,onSuccess));}},[dispatch,location.search]);var onSuccess=function onSuccess(res){setTotalPages(res.total_pages);setProducts(res.products);setLoading(false);};var handleClick=function handleClick(i){var query=new URLSearchParams(location.search);if(query.get('search')){var search=query.get('search');navigate(\"/products?search=\".concat(search,\"&page=\").concat(i));window.scrollTo(0,0);}else if(query.get('category')){var category=query.get('category');navigate(\"/products?category=\".concat(category,\"&page=\").concat(i));window.scrollTo(0,0);}else{navigate(\"/products?page=\".concat(i));window.scrollTo(0,0);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles['wrapper'],children:[/*#__PURE__*/_jsx(\"div\",{className:'heading',children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Categories,{}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles['products-wrapper'],children:products.map(function(product,i){return/*#__PURE__*/_jsx(ProductCard,{addProductToCart:addProductToCart,product:product,productsPage:true,currency:'₹'// Pass rupee symbol here\n,suffix:'Rs'// Add 'Rs' suffix after price\n},i);})}),/*#__PURE__*/_jsx(Pages,{max:totalPages,current:page,onPageClick:handleClick})]})]});};export default Products;","map":{"version":3,"names":["styles","useState","useEffect","useLocation","useNavigate","useDispatch","getProductsPerPage","productsSearch","ProductCard","Pages","Categories","Loading","Products","addProductToCart","page","setPage","products","setProducts","totalPages","setTotalPages","loading","setLoading","location","dispatch","navigate","query","URLSearchParams","search","get","Number","onSuccess","category","res","total_pages","handleClick","i","window","scrollTo","map","product"],"sources":["D:/ReactProjects/grocery-site/client/src/pages/products/Products.js"],"sourcesContent":["import styles from './products.module.css';\nimport {useState, useEffect} from \"react\";\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport {useDispatch} from \"react-redux\";\nimport {getProductsPerPage, productsSearch} from \"../../actions/products\";\nimport ProductCard from \"../../components/product-card/ProductCard\";\nimport Pages from \"../../components/pages/Pages\";\nimport Categories from \"../../components/categories/Categories\";\nimport Loading from \"../../components/loading/Loading\";\n\nconst Products = ({addProductToCart}) => {\n    const [page, setPage] = useState(1);\n    const [products, setProducts] = useState([]);\n    const [totalPages, setTotalPages] = useState(1);\n    const [loading, setLoading] = useState(false);\n\n    const location = useLocation();\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        setLoading(true);\n        const query = new URLSearchParams(location.search);\n        const page = query.get('page') || 1;\n        setPage(Number(page));\n\n        if (query.get('search')) {\n            const search = query.get('search');\n            dispatch(productsSearch(search, page, onSuccess));\n        } else if (query.get('category')) {\n            const category = query.get('category');\n            if (category === 'All') {\n                setPage(Number(page));\n                dispatch(getProductsPerPage(page, null, onSuccess));\n            } else {\n                dispatch(getProductsPerPage(page, category, onSuccess));\n            }\n        } else {\n            setPage(Number(page));\n            dispatch(getProductsPerPage(page, null, onSuccess));\n        }\n    }, [dispatch, location.search]);\n\n    const onSuccess = (res) => {\n        setTotalPages(res.total_pages);\n        setProducts(res.products);\n        setLoading(false);\n    };\n\n    const handleClick = (i) => {\n        const query = new URLSearchParams(location.search);\n\n        if (query.get('search')) {\n            const search = query.get('search');\n            navigate(`/products?search=${search}&page=${i}`);\n            window.scrollTo(0, 0);\n        } else if (query.get('category')) {\n            const category = query.get('category');\n            navigate(`/products?category=${category}&page=${i}`);\n            window.scrollTo(0, 0);\n        } else {\n            navigate(`/products?page=${i}`);\n            window.scrollTo(0, 0);\n        }\n    };\n\n    return (\n        <div className={styles['wrapper']}>\n            <div className={'heading'}>\n                <h1>Products</h1>\n            </div>\n            <Categories />\n            {loading ? (\n                <Loading />\n            ) : (\n                <>\n                    <div className={styles['products-wrapper']}>\n                        {products.map((product, i) => (\n                            <ProductCard\n                                addProductToCart={addProductToCart}\n                                key={i}\n                                product={product}\n                                productsPage={true}\n                                currency={'₹'} // Pass rupee symbol here\n                                suffix={'Rs'} // Add 'Rs' suffix after price\n                            />\n                        ))}\n                    </div>\n                    <Pages max={totalPages} current={page} onPageClick={handleClick} />\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default Products;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}