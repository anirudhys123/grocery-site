{"ast":null,"code":"import _slicedToArray from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'./productCard.module.css';import{useRef,useState}from\"react\";import{motion}from'framer-motion';import{useDispatch,useSelector}from\"react-redux\";import{updateWishlist}from\"../../actions/auth\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductCard=function ProductCard(_ref){var product=_ref.product,addProductToCart=_ref.addProductToCart,_ref$productsPage=_ref.productsPage,productsPage=_ref$productsPage===void 0?false:_ref$productsPage,_ref$currency=_ref.currency,currency=_ref$currency===void 0?'₹':_ref$currency,_ref$suffix=_ref.suffix,suffix=_ref$suffix===void 0?'Rs':_ref$suffix;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addToCart=_useState2[0],setAddToCart=_useState2[1];var wrapperRef=useRef();var wishlist=useSelector(function(state){var _state$authentication;return(_state$authentication=state.authentication.user)===null||_state$authentication===void 0?void 0:_state$authentication.wishlist;})||[];var dispatch=useDispatch();var navigate=useNavigate();var handleWishlist=function handleWishlist(){var onError=function onError(){navigate('/login');};dispatch(updateWishlist(product.product_id,onError));};var handleAddToCart=function handleAddToCart(){setAddToCart(true);setTimeout(function(){setAddToCart(false);addProductToCart(product);},600);};var getXi=function getXi(){var elementData=wrapperRef.current.getBoundingClientRect();return elementData.x;};var getXf=function getXf(){var windowWidth=window.innerWidth;if(windowWidth>1024)return windowWidth-11*16;return windowWidth-5*16;};var getYi=function getYi(){var elementData=wrapperRef.current.getBoundingClientRect();return elementData.y;};return/*#__PURE__*/_jsxs(\"div\",{ref:wrapperRef,className:\"\".concat(styles['wrapper'],\" \").concat(productsPage?styles['products-page']:'',\" \").concat(!product.stock&&styles['out-of-stock']),children:[addToCart&&/*#__PURE__*/_jsx(motion.img,{initial:{x:getXi(),y:getYi(),padding:'1em',borderRadius:'10px'},animate:{x:getXf(),y:0,width:24,height:24,opacity:.8,borderRadius:'50%',padding:'.5em'},transition:{type:\"spring\",stiffness:40,bounce:0},className:styles['cart-img'],src:product.image,alt:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:styles['image-wrapper'],children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name}),/*#__PURE__*/_jsx(\"span\",{onClick:handleWishlist,className:\"material-symbols-outlined \".concat(styles['wishlist'],\" \").concat(wishlist.includes(product.product_id)&&styles['wishlisted']),children:\"favorite\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles['content'],children:[/*#__PURE__*/_jsx(\"p\",{className:styles['name'],children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:styles['footer'],children:[/*#__PURE__*/_jsxs(\"div\",{className:styles['details'],children:[/*#__PURE__*/_jsxs(\"p\",{className:styles['weight'],children:[product.weight,product.measurement]}),/*#__PURE__*/_jsxs(\"p\",{className:styles['price'],children:[currency,Number(product.price).toFixed(2),\" \",suffix]})]}),product.stock?/*#__PURE__*/_jsx(\"div\",{onClick:handleAddToCart,className:styles['add-to-cart'],children:\"Add to Cart\"}):/*#__PURE__*/_jsx(\"div\",{className:styles['unavailable'],children:\"Out of Stock\"})]})]})]});};export default ProductCard;","map":{"version":3,"names":["styles","useRef","useState","motion","useDispatch","useSelector","updateWishlist","useNavigate","ProductCard","product","addProductToCart","productsPage","currency","suffix","addToCart","setAddToCart","wrapperRef","wishlist","state","authentication","user","dispatch","navigate","handleWishlist","onError","product_id","handleAddToCart","setTimeout","getXi","elementData","current","getBoundingClientRect","x","getXf","windowWidth","window","innerWidth","getYi","y","stock","padding","borderRadius","width","height","opacity","type","stiffness","bounce","image","name","includes","weight","measurement","Number","price","toFixed"],"sources":["D:/ReactProjects/grocery-site/client/src/components/product-card/ProductCard.js"],"sourcesContent":["import styles from './productCard.module.css';\nimport {useRef, useState} from \"react\";\nimport {motion} from 'framer-motion';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {updateWishlist} from \"../../actions/auth\";\nimport {useNavigate} from \"react-router-dom\";\n\nconst ProductCard = ({product, addProductToCart, productsPage = false, currency = '₹', suffix = 'Rs'}) => {\n\n    const [addToCart, setAddToCart] = useState(false);\n    const wrapperRef = useRef();\n    const wishlist = useSelector(state => state.authentication.user?.wishlist) || [];\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n\n    const handleWishlist = () => {\n        const onError = () => {\n            navigate('/login');\n        }\n\n        dispatch(updateWishlist(product.product_id, onError));\n    }\n\n    const handleAddToCart = () => {\n        setAddToCart(true);\n\n        setTimeout(() => {\n            setAddToCart(false);\n            addProductToCart(product);\n        }, 600);\n    }\n\n    const getXi = () => {\n        const elementData = wrapperRef.current.getBoundingClientRect();\n        return elementData.x;\n    }\n\n    const getXf = () => {\n        const windowWidth = window.innerWidth;\n        if (windowWidth > 1024)\n            return windowWidth - 11 * 16;\n        return windowWidth - 5 * 16;\n    }\n\n    const getYi = () => {\n        const elementData = wrapperRef.current.getBoundingClientRect();\n        return elementData.y;\n    }\n\n    return (\n        <div ref={wrapperRef}\n             className={`${styles['wrapper']} ${productsPage ? styles['products-page'] : ''} ${!product.stock && styles['out-of-stock']}`}>\n            {addToCart &&\n                <motion.img initial={{\n                    x: getXi(),\n                    y: getYi(),\n                    padding: '1em',\n                    borderRadius: '10px'\n                }}\n                            animate={{\n                                x: getXf(),\n                                y: 0,\n                                width: 24,\n                                height: 24,\n                                opacity: .8,\n                                borderRadius: '50%',\n                                padding: '.5em'\n                            }}\n                            transition={{type: \"spring\", stiffness: 40, bounce: 0}}\n                            className={styles['cart-img']}\n                            src={product.image}\n                            alt={product.name}/>}\n            <div className={styles['image-wrapper']}>\n                <img src={product.image} alt={product.name}/>\n                <span onClick={handleWishlist}\n                      className={`material-symbols-outlined ${styles['wishlist']} ${wishlist.includes(product.product_id) && styles['wishlisted']}`}>favorite</span>\n            </div>\n            <div className={styles['content']}>\n                <p className={styles['name']}>{product.name}</p>\n                <div className={styles['footer']}>\n                    <div className={styles['details']}>\n                        <p className={styles['weight']}>{product.weight}{product.measurement}</p>\n                        <p className={styles['price']}>{currency}{Number(product.price).toFixed(2)} {suffix}</p>\n                    </div>\n                    {product.stock ?\n                        <div onClick={handleAddToCart} className={styles['add-to-cart']}>Add to Cart</div> :\n                        <div className={styles['unavailable']}>Out of Stock</div>}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ProductCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}