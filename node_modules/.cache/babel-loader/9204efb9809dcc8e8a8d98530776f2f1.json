{"ast":null,"code":"import _slicedToArray from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'./orderId.module.css';import{useEffect,useState}from\"react\";import{Link,useNavigate,useParams}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import Loading from\"../../../components/loading/Loading\";import Order from'../../../shared/assets/tracking/order.png';import{fetchOrder}from\"../../../actions/orders\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderId=function OrderId(){var _useParams=useParams(),id=_useParams.id;var order=useSelector(function(state){return state.orders.fetched;});var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var navigate=useNavigate();useEffect(function(){var onSuccess=function onSuccess(){setLoading(false);};var onError=function onError(e){setLoading(false);navigate('/404');};if(order&&order.order_id===id)onSuccess();else dispatch(fetchOrder(id,onSuccess,onError));},[]);var capitalizeFirst=function capitalizeFirst(m){return m.charAt(0).toUpperCase()+m.slice(1).toLowerCase();};var getProgress=function getProgress(){switch(order===null||order===void 0?void 0:order.status){case'PROCESSING':return 50;case'FULFILLED':return 100;default:return 5;}};if(loading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"div\",{className:styles['wrapper'],children:[/*#__PURE__*/_jsx(\"div\",{className:'heading',children:/*#__PURE__*/_jsx(\"h1\",{children:\"Track Order\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles['sub'],children:[\"Order \",/*#__PURE__*/_jsxs(\"span\",{children:[\"#\",order.order_id]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles['full-progress'],children:/*#__PURE__*/_jsx(\"div\",{className:styles['progress'],style:{width:getProgress()+'%'},children:/*#__PURE__*/_jsx(\"img\",{className:styles['img'],style:{transform:order.status==='CANCELLED'?'scaleX(-1)':''},src:Order,alt:'Order'})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles['status'],children:[/*#__PURE__*/_jsx(\"span\",{className:styles['update'],children:\"Order Update:\"}),\" Your order has been \",capitalizeFirst(order.status),\".\"]}),order.status==='FULFILLED'&&/*#__PURE__*/_jsx(Link,{className:styles['shipping'],to:\"/shipping/\".concat(order.order_id),children:\"Track Shipping\"})]});};export default OrderId;","map":{"version":3,"names":["styles","useEffect","useState","Link","useNavigate","useParams","useDispatch","useSelector","Loading","Order","fetchOrder","OrderId","id","order","state","orders","fetched","dispatch","loading","setLoading","navigate","onSuccess","onError","e","order_id","capitalizeFirst","m","charAt","toUpperCase","slice","toLowerCase","getProgress","status","width","transform"],"sources":["D:/ReactProjects/grocery-site/client/src/pages/order/id/OrderId.js"],"sourcesContent":["import styles from './orderId.module.css';\nimport {useEffect, useState} from \"react\";\nimport {Link, useNavigate, useParams} from \"react-router-dom\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport Loading from \"../../../components/loading/Loading\";\nimport Order from '../../../shared/assets/tracking/order.png';\nimport {fetchOrder} from \"../../../actions/orders\";\n\nconst OrderId = () => {\n\n    const {id} = useParams();\n    const order = useSelector(state => state.orders.fetched);\n    const dispatch = useDispatch();\n    const [loading, setLoading] = useState(true);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const onSuccess = () => {\n            setLoading(false);\n        }\n\n        const onError = (e) => {\n            setLoading(false);\n            navigate('/404')\n        }\n\n        if (order && order.order_id === id)\n            onSuccess();\n        else\n            dispatch(fetchOrder(id, onSuccess, onError))\n\n    }, []);\n\n    const capitalizeFirst = (m) => {\n        return m.charAt(0).toUpperCase() + m.slice(1).toLowerCase();\n    }\n\n    const getProgress = () => {\n        switch (order?.status) {\n            case 'PROCESSING':\n                return 50;\n            case 'FULFILLED':\n                return 100;\n            default:\n                return 5\n        }\n    }\n\n    if (loading)\n        return <Loading/>\n\n    return (\n        <div className={styles['wrapper']}>\n            <div className={'heading'}>\n                <h1>Track Order</h1>\n            </div>\n            <div className={styles['sub']}>\n                Order <span>#{order.order_id}</span>\n            </div>\n            <div className={styles['full-progress']}>\n                <div className={styles['progress']} style={{width: getProgress() + '%'}}>\n                    <img className={styles['img']}\n                         style={{transform: order.status === 'CANCELLED' ? 'scaleX(-1)' : ''}} src={Order}\n                         alt={'Order'}/>\n                </div>\n            </div>\n            <div className={styles['status']}>\n                <span className={styles['update']}>Order Update:</span> Your order has\n                been {capitalizeFirst(order.status)}.\n            </div>\n            {order.status === 'FULFILLED' &&\n                <Link className={styles['shipping']} to={`/shipping/${order.order_id}`}>Track Shipping</Link>}\n        </div>\n    );\n}\n\nexport default OrderId;"],"mappings":"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"},"metadata":{},"sourceType":"module"}