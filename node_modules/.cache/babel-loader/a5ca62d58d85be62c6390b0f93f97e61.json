{"ast":null,"code":"import _asyncToGenerator from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\ReactProjects\\\\grocery-site\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as api from'../api';import{FETCH_RECOMMENDATIONS,UPDATE_DATABASE,VALIDATE_CART,VALIDATE_CART_ERR}from\"../constants/actions/products\";export var getProductsPerPage=function getProductsPerPage(page,category,onSuccess){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var products;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.getProductsPerPage(page,category).then(function(res){return res.data;});case 3:products=_context.sent;onSuccess(products);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));};export var productsSearch=function productsSearch(search,page,onSuccess){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var products;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.productsSearch(search,page).then(function(res){return res.data;});case 3:products=_context2.sent;onSuccess(products);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));};export var getRecommendations=function getRecommendations(onSuccess){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return api.getRecommendations().then(function(res){return res.data;});case 3:data=_context3.sent;dispatch({type:FETCH_RECOMMENDATIONS,data:data});onSuccess(data);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x){return _ref3.apply(this,arguments);};}();};export var postProduct=function postProduct(product,onSuccess,onError){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var data,_data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return api.postProduct(product).then(function(res){return res.data;});case 3:data=_context4.sent;onSuccess(data);_context4.next=11;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);_data=_context4.t0.response.data;onError(_data);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));};export var validateCart=function validateCart(cart,onSuccess,onError){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var _cartData$token,cartData,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return api.validateCart(cart).then(function(res){return res.data;});case 3:cartData=_context5.sent;dispatch({type:VALIDATE_CART,data:cartData});onSuccess((_cartData$token=cartData.token)===null||_cartData$token===void 0?void 0:_cartData$token.split('.')[1]);_context5.next=13;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);data=_context5.t0.response.data;dispatch({type:VALIDATE_CART_ERR,data:data});onError(data);case 13:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}));return function(_x2){return _ref5.apply(this,arguments);};}();};export var adminUpdateDatabase=function adminUpdateDatabase(csv,mode,onSuccess,onError){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var updatedData;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return api.adminUpdateDatabase(csv,mode).then(function(res){return res.data;});case 3:updatedData=_context6.sent;dispatch({type:UPDATE_DATABASE,data:updatedData});onSuccess(updatedData);_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](0);onError(_context6.t0);case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[0,8]]);}));return function(_x3){return _ref6.apply(this,arguments);};}();};","map":{"version":3,"names":["api","FETCH_RECOMMENDATIONS","UPDATE_DATABASE","VALIDATE_CART","VALIDATE_CART_ERR","getProductsPerPage","page","category","onSuccess","then","res","data","products","console","log","productsSearch","search","getRecommendations","dispatch","type","postProduct","product","onError","response","validateCart","cart","cartData","token","split","adminUpdateDatabase","csv","mode","updatedData"],"sources":["D:/ReactProjects/grocery-site/client/src/actions/products.js"],"sourcesContent":["import * as api from '../api';\nimport {FETCH_RECOMMENDATIONS, UPDATE_DATABASE, VALIDATE_CART, VALIDATE_CART_ERR} from \"../constants/actions/products\";\n\nexport const getProductsPerPage = (page, category, onSuccess) => async () => {\n    try {\n        const products = await api.getProductsPerPage(page, category).then(res => res.data);\n        onSuccess(products);\n    } catch (error) {\n        console.log(error);\n    } \n}\n\nexport const productsSearch = (search, page, onSuccess) => async () => {\n    try {\n        const products = await api.productsSearch(search, page).then(res => res.data);\n        onSuccess(products);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\nexport const getRecommendations = (onSuccess) => async (dispatch) => {\n    try {\n        const data = await api.getRecommendations().then(res => res.data);\n        dispatch({type: FETCH_RECOMMENDATIONS, data})\n        onSuccess(data);\n    } catch (e) {\n        console.log(e)\n    }\n}\n\nexport const postProduct = (product, onSuccess, onError) => async () => {\n    try {\n        const data = await api.postProduct(product).then(res => res.data);\n        onSuccess(data);\n    } catch (e) {\n        const {data} = e.response;\n        onError(data);\n    }\n}\n\nexport const validateCart = (cart, onSuccess, onError) => async (dispatch) => {\n    try {\n        const cartData = await api.validateCart(cart).then(res => res.data);\n        dispatch({type: VALIDATE_CART, data: cartData});\n        onSuccess(cartData.token?.split('.')[1]);\n    } catch (e) {\n        const {data} = e.response;\n        dispatch({type: VALIDATE_CART_ERR, data});\n        onError(data);\n    }\n}\n\nexport const adminUpdateDatabase = (csv, mode, onSuccess, onError) => async (dispatch) => {\n    try {\n        const updatedData = await api.adminUpdateDatabase(csv, mode).then(res => res.data);\n        dispatch({type: UPDATE_DATABASE, data: updatedData});\n        onSuccess(updatedData);\n    } catch (e) {\n        onError(e);\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}