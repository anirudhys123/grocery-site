{"ast":null,"code":"import _asyncToGenerator from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"D:\\\\ReactProjects\\\\grocery-site\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import*as api from'../api/index';import{ORDERS_FETCH,ORDERS_FETCH_ALL}from\"../constants/actions/orders\";export var fetchOrder=function fetchOrder(id,onSuccess,onError){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var orderData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.fetchOrder(id).then(function(res){return res.data;});case 3:orderData=_context.sent;dispatch({type:ORDERS_FETCH,data:orderData});onSuccess(orderData);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);onError(_context.t0.response.data);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var updateOrder=function updateOrder(id,status,onSuccess,onError){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.updateOrder(id,status);case 3:onSuccess();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);onError(_context2.t0.response.data);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));};export var fetchOrders=function fetchOrders(page,onSuccess,onError){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var ordersData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return api.fetchOrders(page).then(function(res){return res.data;});case 3:ordersData=_context3.sent;dispatch({type:ORDERS_FETCH_ALL,data:ordersData});onSuccess();_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);onError(_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};export var postOrder=function postOrder(token,data,onSuccess,onError){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _yield$api$processPay,url;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return api.processPayment(token,data).then(function(res){return res.data;});case 3:_yield$api$processPay=_context4.sent;url=_yield$api$processPay.url;onSuccess(url);_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);onError(_context4.t0);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));};","map":{"version":3,"names":["api","ORDERS_FETCH","ORDERS_FETCH_ALL","fetchOrder","id","onSuccess","onError","dispatch","then","res","data","orderData","type","response","updateOrder","status","fetchOrders","page","ordersData","postOrder","token","processPayment","url"],"sources":["D:/ReactProjects/grocery-site/client/src/actions/orders.js"],"sourcesContent":["import * as api from '../api/index';\nimport {ORDERS_FETCH, ORDERS_FETCH_ALL} from \"../constants/actions/orders\";\n\nexport const fetchOrder = (id, onSuccess, onError) => async (dispatch) => {\n    try {\n        const orderData = await api.fetchOrder(id).then(res => res.data);\n        dispatch({type: ORDERS_FETCH, data: orderData})\n        onSuccess(orderData);\n    } catch (e) {\n        onError(e.response.data);\n    }\n}\n\nexport const updateOrder = (id, status, onSuccess, onError) => async () => {\n    try {\n        await api.updateOrder(id, status);\n        onSuccess();\n    } catch (e) {\n        onError(e.response.data);\n    }\n}\n\nexport const fetchOrders = (page, onSuccess, onError) => async (dispatch) => {\n    try {\n        const ordersData = await api.fetchOrders(page).then(res => res.data);\n        dispatch({type: ORDERS_FETCH_ALL, data: ordersData});\n        onSuccess();\n    } catch (e) {\n        onError(e);\n    }\n}\n\nexport const postOrder = (token, data, onSuccess, onError) => async () => {\n    try {\n        // const [name, email, phone, country, city, area,\n        //     street, building_number, floor, apartment_number] = data;\n        const {url} = await api.processPayment(token, data).then(res => res.data);\n        onSuccess(url);\n    } catch (e) {\n        onError(e);\n    }\n}"],"mappings":"+PAAA,MAAO,GAAKA,CAAAA,GAAZ,KAAqB,cAArB,CACA,OAAQC,YAAR,CAAsBC,gBAAtB,KAA6C,6BAA7C,CAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,EAAD,CAAKC,SAAL,CAAgBC,OAAhB,iGAA4B,iBAAOC,QAAP,sKAEtBP,CAAAA,GAAG,CAACG,UAAJ,CAAeC,EAAf,EAAmBI,IAAnB,CAAwB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAA3B,CAFsB,QAExCC,SAFwC,eAG9CJ,QAAQ,CAAC,CAACK,IAAI,CAAEX,YAAP,CAAqBS,IAAI,CAAEC,SAA3B,CAAD,CAAR,CACAN,SAAS,CAACM,SAAD,CAAT,CAJ8C,+EAM9CL,OAAO,CAAC,YAAEO,QAAF,CAAWH,IAAZ,CAAP,CAN8C,oEAA5B,gEAAnB,CAUP,MAAO,IAAMI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACV,EAAD,CAAKW,MAAL,CAAaV,SAAb,CAAwBC,OAAxB,6EAAoC,gLAEjDN,CAAAA,GAAG,CAACc,WAAJ,CAAgBV,EAAhB,CAAoBW,MAApB,CAFiD,QAGvDV,SAAS,GAH8C,kFAKvDC,OAAO,CAAC,aAAEO,QAAF,CAAWH,IAAZ,CAAP,CALuD,qEAApC,IAApB,CASP,MAAO,IAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,IAAD,CAAOZ,SAAP,CAAkBC,OAAlB,kGAA8B,kBAAOC,QAAP,6KAExBP,CAAAA,GAAG,CAACgB,WAAJ,CAAgBC,IAAhB,EAAsBT,IAAtB,CAA2B,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAA9B,CAFwB,QAE3CQ,UAF2C,gBAGjDX,QAAQ,CAAC,CAACK,IAAI,CAAEV,gBAAP,CAAyBQ,IAAI,CAAEQ,UAA/B,CAAD,CAAR,CACAb,SAAS,GAJwC,mFAMjDC,OAAO,cAAP,CANiD,sEAA9B,kEAApB,CAUP,MAAO,IAAMa,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAQV,IAAR,CAAcL,SAAd,CAAyBC,OAAzB,6EAAqC,8MAIlCN,CAAAA,GAAG,CAACqB,cAAJ,CAAmBD,KAAnB,CAA0BV,IAA1B,EAAgCF,IAAhC,CAAqC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAAxC,CAJkC,6CAI/CY,GAJ+C,uBAI/CA,GAJ+C,CAKtDjB,SAAS,CAACiB,GAAD,CAAT,CALsD,mFAOtDhB,OAAO,cAAP,CAPsD,sEAArC,IAAlB"},"metadata":{},"sourceType":"module"}