{"ast":null,"code":"import _slicedToArray from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'./checkout.module.css';import'../.././shared/css/master.css';import{useState,useRef}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import Error from\"../../components/feedback/error/Error\";import{postOrder}from\"../../actions/orders\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Checkout=function Checkout(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var fname=useRef();var lname=useRef();var email=useRef();var phone=useRef();var city=useRef();var area=useRef();var street=useRef();var building_number=useRef();var floor=useRef();var apartment_number=useRef();var dispatch=useDispatch();var cart=useSelector(function(state){return state.products.cart_validation;});var handleCheckout=function handleCheckout(){if(!fname.current.value)return setError(\"Enter a first name\");if(!lname.current.value)return setError(\"Enter a last name\");if(!email.current.value)return setError(\"Enter an email address\");if(!validateEmail(email.current.value))return setError(\"Enter a valid email address\");if(!phone.current.value)return setError(\"Enter a phone number\");if(!validatePhone(phone.current.value))return setError(\"Enter a valid phone number\");if(!city.current.value)return setError(\"Enter a city\");if(!area.current.value)return setError(\"Enter an area\");if(!street.current.value)return setError(\"Enter a street\");if(!building_number.current.value)return setError(\"Enter a building number\");if(isNaN(building_number.current.value))return setError(\"Enter a valid building number\");if(!floor.current.value)return setError(\"Enter a floor\");if(isNaN(floor.current.value))return setError(\"Enter a valid building number\");if(!apartment_number.current.value)return setError(\"Enter an apartment number\");if(isNaN(apartment_number.current.value))return setError(\"Enter a valid building number\");var onSuccess=function onSuccess(url){window.location.href=url;};var onError=function onError(e){setError(e.message);};var data={name:{first:fname.current.value,last:lname.current.value},email:email.current.value,phone_number:phone.current.value,address:{country:'Egypt',city:city.current.value,area:area.current.value,street:street.current.value,building_number:building_number.current.value,floor:floor.current.value,apartment_number:apartment_number.current.value}};dispatch(postOrder(cart.token,data,onSuccess,onError));};var validatePhone=function validatePhone(phone){return String(phone).toLowerCase().match(/^01[0-2,5]{1}[0-9]{8}$/);};var validateEmail=function validateEmail(email){return String(email).toLowerCase().match(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);};return/*#__PURE__*/_jsxs(\"div\",{className:styles['wrapper'],children:[error&&/*#__PURE__*/_jsx(Error,{error:error,setError:setError}),/*#__PURE__*/_jsx(\"div\",{className:'heading-wrapper',children:/*#__PURE__*/_jsx(\"h1\",{className:'heading',children:\"Checkout\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles['form'],children:[/*#__PURE__*/_jsx(\"input\",{ref:fname,type:\"text\",placeholder:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{ref:lname,type:\"text\",placeholder:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{ref:email,type:\"text\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{ref:phone,type:\"text\",placeholder:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{ref:city,type:\"text\",placeholder:\"City\"}),/*#__PURE__*/_jsx(\"input\",{ref:area,type:\"text\",placeholder:\"Area\"}),/*#__PURE__*/_jsx(\"input\",{ref:street,type:\"text\",placeholder:\"Street\"}),/*#__PURE__*/_jsx(\"input\",{ref:building_number,type:\"text\",placeholder:\"Building Number\"}),/*#__PURE__*/_jsx(\"input\",{ref:floor,type:\"text\",placeholder:\"Floor\"}),/*#__PURE__*/_jsx(\"input\",{ref:apartment_number,type:\"text\",placeholder:\"Apartment Number\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles['total'],children:[/*#__PURE__*/_jsx(\"div\",{className:styles[\"total-text\"],children:\"Total Price:\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles['total-amount'],children:[cart.total,\" EGP\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles['total-wrapper'],children:/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckout,className:'btn1',children:\"Checkout\"})})]});};export default Checkout;","map":{"version":3,"names":["styles","useState","useRef","useDispatch","useSelector","Error","postOrder","Checkout","error","setError","fname","lname","email","phone","city","area","street","building_number","floor","apartment_number","dispatch","cart","state","products","cart_validation","handleCheckout","current","value","validateEmail","validatePhone","isNaN","onSuccess","url","window","location","href","onError","e","message","data","name","first","last","phone_number","address","country","token","String","toLowerCase","match","total"],"sources":["D:/ReactProjects/grocery-site/client/src/pages/checkout/checkout.js"],"sourcesContent":["import styles from './checkout.module.css';\nimport '../.././shared/css/master.css';\nimport {useState, useRef} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport Error from \"../../components/feedback/error/Error\";\nimport {postOrder} from \"../../actions/orders\";\n\nconst Checkout = () => {\n    const [error, setError] = useState('');\n    const fname = useRef();\n    const lname = useRef();\n    const email = useRef();\n    const phone = useRef();\n    const city = useRef();\n    const area = useRef();\n    const street = useRef();\n    const building_number = useRef();\n    const floor = useRef();\n    const apartment_number = useRef();\n    const dispatch = useDispatch();\n\n    const cart = useSelector(state => state.products.cart_validation);\n\n    const handleCheckout = () => {\n\n        if (!fname.current.value)\n            return setError(\"Enter a first name\");\n        if (!lname.current.value)\n            return setError(\"Enter a last name\");\n        if (!email.current.value)\n            return setError(\"Enter an email address\");\n        if (!validateEmail(email.current.value))\n            return setError(\"Enter a valid email address\");\n        if (!phone.current.value)\n            return setError(\"Enter a phone number\");\n        if (!validatePhone(phone.current.value))\n            return setError(\"Enter a valid phone number\");\n        if (!city.current.value)\n            return setError(\"Enter a city\");\n        if (!area.current.value)\n            return setError(\"Enter an area\");\n        if (!street.current.value)\n            return setError(\"Enter a street\");\n        if (!building_number.current.value)\n            return setError(\"Enter a building number\");\n        if (isNaN(building_number.current.value))\n            return setError(\"Enter a valid building number\");\n        if (!floor.current.value)\n            return setError(\"Enter a floor\");\n        if (isNaN(floor.current.value))\n            return setError(\"Enter a valid building number\");\n        if (!apartment_number.current.value)\n            return setError(\"Enter an apartment number\");\n        if (isNaN(apartment_number.current.value))\n            return setError(\"Enter a valid building number\");\n\n\n        const onSuccess = (url) => {\n            window.location.href = url;\n        }\n\n        const onError = (e) => {\n            setError(e.message);\n        }\n\n\n        const data = {\n\n            name: {\n                first: fname.current.value,\n                last: lname.current.value,\n            },\n            email: email.current.value,\n            phone_number: phone.current.value,\n            address: {\n                country: 'Egypt',\n                city: city.current.value,\n                area: area.current.value,\n                street: street.current.value,\n                building_number: building_number.current.value,\n                floor: floor.current.value,\n                apartment_number: apartment_number.current.value\n            }\n        };\n\n        dispatch(postOrder(cart.token, data, onSuccess, onError));\n\n    }\n    const validatePhone = (phone) => {\n        return String(phone)\n            .toLowerCase()\n            .match(\n                /^01[0-2,5]{1}[0-9]{8}$/\n            );\n    };\n\n    const validateEmail = (email) => {\n        return String(email)\n            .toLowerCase()\n            .match(\n                /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n            );\n    };\n\n    return (\n        <div className={styles['wrapper']}>\n            {error && <Error error={error} setError={setError}/>}\n            <div className={'heading-wrapper'}>\n                <h1 className={'heading'}>Checkout</h1>\n            </div>\n\n            <div className={styles['form']}>\n                <input ref={fname} type=\"text\" placeholder=\"First Name\"/>\n                <input ref={lname} type=\"text\" placeholder=\"Last Name\"/>\n\n                <input ref={email} type=\"text\" placeholder=\"Email\"/>\n                <input ref={phone} type=\"text\" placeholder=\"Phone\"/>\n                <input ref={city} type=\"text\" placeholder=\"City\"/>\n\n                <input ref={area} type=\"text\" placeholder=\"Area\"/>\n                <input ref={street} type=\"text\" placeholder=\"Street\"/>\n                <input ref={building_number} type=\"text\" placeholder=\"Building Number\"/>\n\n                <input ref={floor} type=\"text\" placeholder=\"Floor\"/>\n                <input ref={apartment_number} type=\"text\" placeholder=\"Apartment Number\"/>\n            </div>\n\n            <div className={styles['total']}>\n                <div className={styles[\"total-text\"]}>Total Price:</div>\n                <div className={styles['total-amount']}>{cart.total} EGP</div>\n            </div>\n\n            <div className={styles['total-wrapper']}>\n                <button onClick={handleCheckout} className={'btn1'}>Checkout</button>\n            </div>\n\n        </div>\n    )\n}\nexport default Checkout;"],"mappings":"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"},"metadata":{},"sourceType":"module"}