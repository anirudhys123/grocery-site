{"ast":null,"code":"import _asyncToGenerator from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createForOfIteratorHelper from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"D:/ReactProjects/grocery-site/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\ReactProjects\\\\grocery-site\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from'react';import styles from'./cart.module.css';import CartItem from\"../../components/cart-item/CartItem\";import{Link}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import Error from\"../../components/feedback/error/Error\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(_ref){var cart=_ref.cart,cartCount=_ref.cartCount,updateQuantity=_ref.updateQuantity;var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var getTotal=function getTotal(){var total=0;var _iterator=_createForOfIteratorHelper(cart),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var cartElement=_step.value;total+=cartElement.price*cartElement.quantity;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return total;};var handlePaymentSuccess=function handlePaymentSuccess(paymentId){console.log(\"Payment Successful. Payment ID: \",paymentId);// Perform any additional actions you need after successful payment\n};var loadRazorpay=function loadRazorpay(src){return new Promise(function(resolve){var script=document.createElement('script');script.src=src;script.onload=function(){resolve(true);};script.onerror=function(){resolve(false);};document.body.appendChild(script);});};var handlePayment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,options,paymentObject;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return loadRazorpay('https://checkout.razorpay.com/v1/checkout.js');case 2:res=_context.sent;if(res){_context.next=6;break;}alert('Razorpay SDK failed to load. Are you online?');return _context.abrupt(\"return\");case 6:options={key:'rzp_test_k3e3fimeByvpbP',// Use your own test or live Razorpay API key\namount:getTotal()*100,// Razorpay works with paise, so multiply by 100\ncurrency:'INR',name:'Anirudh Groceries',// Name displayed on the Razorpay Checkout\ndescription:\"Payment for Cart Items\",handler:function handler(response){alert('Payment successful: '+response.razorpay_payment_id);handlePaymentSuccess(response.razorpay_payment_id);},prefill:{name:'John Doe',// Prefilled customer name\nemail:'user@example.com',contact:'9999999999'},notes:{address:'some address'},theme:{color:'#3399cc'}};paymentObject=new window.Razorpay(options);paymentObject.open();case 9:case\"end\":return _context.stop();}}},_callee);}));return function handlePayment(){return _ref2.apply(this,arguments);};}();if(cart&&!cart.length)return/*#__PURE__*/_jsxs(\"div\",{className:styles['wrapper'],children:[/*#__PURE__*/_jsx(\"div\",{className:'heading',children:/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles['no-items'],children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(Link,{to:'/products',className:'btn1',style:{width:'150px',padding:'10px',marginLeft:'300px'},children:\"Start Shopping\"})]});return/*#__PURE__*/_jsxs(\"div\",{className:styles['wrapper'],children:[error&&/*#__PURE__*/_jsx(Error,{error:error,setError:setError}),/*#__PURE__*/_jsx(\"div\",{className:'heading',children:/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles['products-wrapper'],children:cart.map(function(product,i){return/*#__PURE__*/_jsx(CartItem,{product:product,updateQuantity:updateQuantity},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:styles['total-wrapper'],children:[/*#__PURE__*/_jsxs(\"div\",{className:styles['total-text'],children:[\"Total (\",cartCount,\" Items):\"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles['total-amount'],children:[\"\\u20B9\",getTotal().toFixed(2),\" Rs\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePayment,style:{background:'linear-gradient(135deg, #00C9FF 0%, #92FE9D 100%)',color:'white',fontSize:'18px',padding:'12px 24px',border:'none',borderRadius:'30px',cursor:'pointer',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.1)',transition:'transform 0.2s ease-in-out, background 0.2s ease-in-out',fontWeight:'bold',display:'block',margin:'20px auto'},onMouseEnter:function onMouseEnter(e){e.target.style.transform='scale(1.05)';e.target.style.background='linear-gradient(135deg, #00C9FF 0%, #00FF77 100%)';},onMouseLeave:function onMouseLeave(e){e.target.style.transform='scale(1)';e.target.style.background='linear-gradient(135deg, #00C9FF 0%, #92FE9D 100%)';},children:\"Pay Now\"})]});};export default Cart;","map":{"version":3,"names":["React","useState","styles","CartItem","Link","useDispatch","Error","Cart","cart","cartCount","updateQuantity","dispatch","error","setError","getTotal","total","cartElement","price","quantity","handlePaymentSuccess","paymentId","console","log","loadRazorpay","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","handlePayment","res","alert","options","key","amount","currency","name","description","handler","response","razorpay_payment_id","prefill","email","contact","notes","address","theme","color","paymentObject","window","Razorpay","open","length","width","padding","marginLeft","map","product","i","toFixed","background","fontSize","border","borderRadius","cursor","boxShadow","transition","fontWeight","display","margin","e","target","style","transform"],"sources":["D:/ReactProjects/grocery-site/client/src/pages/cart/Cart.js"],"sourcesContent":["import React, { useState } from 'react';\nimport styles from './cart.module.css';\nimport CartItem from \"../../components/cart-item/CartItem\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport Error from \"../../components/feedback/error/Error\";\n\nconst Cart = ({ cart, cartCount, updateQuantity }) => {\n  const dispatch = useDispatch();\n  const [error, setError] = useState('');\n\n  const getTotal = () => {\n    let total = 0;\n    for (const cartElement of cart) {\n      total += cartElement.price * cartElement.quantity;\n    }\n    return total;\n  };\n\n  const handlePaymentSuccess = (paymentId) => {\n    console.log(\"Payment Successful. Payment ID: \", paymentId);\n    // Perform any additional actions you need after successful payment\n  };\n\n  const loadRazorpay = (src) => {\n    return new Promise((resolve) => {\n      const script = document.createElement('script');\n      script.src = src;\n      script.onload = () => {\n        resolve(true);\n      };\n      script.onerror = () => {\n        resolve(false);\n      };\n      document.body.appendChild(script);\n    });\n  };\n\n  const handlePayment = async () => {\n    const res = await loadRazorpay('https://checkout.razorpay.com/v1/checkout.js');\n\n    if (!res) {\n      alert('Razorpay SDK failed to load. Are you online?');\n      return;\n    }\n\n    const options = {\n      key: 'rzp_test_k3e3fimeByvpbP', // Use your own test or live Razorpay API key\n      amount: getTotal() * 100,  // Razorpay works with paise, so multiply by 100\n      currency: 'INR',\n      name: 'Anirudh Groceries',  // Name displayed on the Razorpay Checkout\n      description: `Payment for Cart Items`,\n      handler: function (response) {\n        alert('Payment successful: ' + response.razorpay_payment_id);\n        handlePaymentSuccess(response.razorpay_payment_id);\n      },\n      prefill: {\n        name: 'John Doe',  // Prefilled customer name\n        email: 'user@example.com',\n        contact: '9999999999',\n      },\n      notes: {\n        address: 'some address',\n      },\n      theme: {\n        color: '#3399cc',\n      },\n    };\n\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  };\n\n  if (cart && !cart.length)\n    return (\n      <div className={styles['wrapper']}>\n        <div className={'heading'}>\n          <h1>Shopping Cart</h1>\n        </div>\n        <div className={styles['no-items']}>Your cart is empty</div>\n        <Link to={'/products'} className={'btn1'} style={{ width: '150px', padding: '10px', marginLeft:'300px' }}>\n          Start Shopping\n        </Link>\n      </div>\n    );\n\n  return (\n    <div className={styles['wrapper']}>\n      {error && <Error error={error} setError={setError} />}\n      <div className={'heading'}>\n        <h1>Shopping Cart</h1>\n      </div>\n      <div className={styles['products-wrapper']}>\n        {cart.map((product, i) => (\n          <CartItem product={product} updateQuantity={updateQuantity} key={i} />\n        ))}\n      </div>\n      <div className={styles['total-wrapper']}>\n        <div className={styles['total-text']}>Total ({cartCount} Items):</div>\n        <div className={styles['total-amount']}>â‚¹{getTotal().toFixed(2)} Rs</div>\n      </div>\n\n      {/* Stylish Pay Now button that opens Razorpay */}\n      <button\n        onClick={handlePayment}\n        style={{\n          background: 'linear-gradient(135deg, #00C9FF 0%, #92FE9D 100%)',\n          color: 'white',\n          fontSize: '18px',\n          padding: '12px 24px',\n          border: 'none',\n          borderRadius: '30px',\n          cursor: 'pointer',\n          boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',\n          transition: 'transform 0.2s ease-in-out, background 0.2s ease-in-out',\n          fontWeight: 'bold',\n          display: 'block',\n          margin: '20px auto',\n        }}\n        onMouseEnter={(e) => {\n          e.target.style.transform = 'scale(1.05)';\n          e.target.style.background = 'linear-gradient(135deg, #00C9FF 0%, #00FF77 100%)';\n        }}\n        onMouseLeave={(e) => {\n          e.target.style.transform = 'scale(1)';\n          e.target.style.background = 'linear-gradient(135deg, #00C9FF 0%, #92FE9D 100%)';\n        }}\n      >\n        Pay Now\n      </button>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}